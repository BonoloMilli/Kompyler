"use strict";(self["webpackChunkskillspot"]=self["webpackChunkskillspot"]||[]).push([[5],{116:function(e,a,t){var s=t(6518),n=t(2652),i=t(9306),r=t(8551),o=t(1767);s({target:"Iterator",proto:!0,real:!0},{find:function(e){r(this),i(e);var a=o(this),t=0;return n(a,(function(a,s){if(e(a,t++))return s(a)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})},713:function(e,a,t){var s=t(9565),n=t(9306),i=t(8551),r=t(1767),o=t(9462),l=t(6319),c=o((function(){var e=this.iterator,a=i(s(this.next,e)),t=this.done=!!a.done;if(!t)return l(e,this.mapper,[a.value,this.counter++],!0)}));e.exports=function(e){return i(this),n(e),new c(r(this),{mapper:e})}},1148:function(e,a,t){var s=t(6518),n=t(2652),i=t(9306),r=t(8551),o=t(1767);s({target:"Iterator",proto:!0,real:!0},{every:function(e){r(this),i(e);var a=o(this),t=0;return!n(a,(function(a,s){if(!e(a,t++))return s()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},1701:function(e,a,t){var s=t(6518),n=t(713),i=t(6395);s({target:"Iterator",proto:!0,real:!0,forced:i},{map:n})},7328:function(e,a,t){t.r(a),t.d(a,{default:function(){return ve}});t(8111),t(3579);var s=t(641),n=t(33),i=t(3751);const r={class:"wrapper"},o={class:"content-wrapper"},l={class:"dashboard-container"},c={class:"dashboard-grid"},d={class:"card evaluators-card"},u={class:"card-header"},v={class:"card-content"},m={class:"evaluator-grid"},g={class:"evaluator-info"},h={class:"evaluator-name"},f={class:"evaluator-role"},p={class:"evaluator-tasks"},b={class:"evaluator-actions"},k=["onClick"],y=["onClick","title"],w={key:1,class:"evaluator-badge"},E={key:0,class:"modal"},C={class:"modal-content"},S={class:"form-group"},L={class:"form-group"},T={class:"card tasks-card"},x={class:"card-content"},A={key:0,class:"task-list"},M={class:"task-header"},B={class:"task-title"},I={class:"task-body"},O={class:"task-description"},R={class:"task-footer"},D={class:"task-meta"},$={class:"task-assigned"},Q={class:"meta-value"},j={class:"task-due"},_={class:"meta-value"},N={class:"evaluation-status"},F={class:"status-count"},X=["onClick","disabled"],P={key:1,class:"no-tasks"},q={key:1,class:"modal evaluator-selection-modal"},J={class:"modal-content wide-modal"},U={class:"evaluator-profiles"},G=["onClick","title"],V={class:"evaluator-name"},W={class:"evaluator-stats"},z={key:2,class:"modal evaluation-modal"},K={class:"modal-content evaluation-content"},Y={class:"modal-header"},H={class:"modal-body"},Z={class:"rubric-container"},ee={class:"rubric-table"},ae={class:"criterion-name"},te=["onClick"],se={class:"score-content"},ne={class:"score-description"},ie={class:"comments-section"},re={class:"modal-footer"};function oe(e,a,t,oe,le,ce){const de=(0,s.g2)("ResponsiveSidebar");return(0,s.uX)(),(0,s.CE)("div",r,[(0,s.bF)(de),(0,s.Lk)("div",o,[(0,s.Lk)("div",l,[a[27]||(a[27]=(0,s.Lk)("div",{class:"dashboard-header sticky-header"},[(0,s.Lk)("h3",{class:"title"},"Evaluate Tasks"),(0,s.Lk)("p",{class:"description"},"View and evaluate tasks assigned to team members.")],-1)),(0,s.Lk)("div",c,[(0,s.Lk)("div",d,[(0,s.Lk)("div",u,[a[10]||(a[10]=(0,s.Lk)("h3",null,"Evaluators",-1)),(0,s.Lk)("button",{class:"btn-primary",onClick:a[0]||(a[0]=(...e)=>ce.showAddEvaluatorModal&&ce.showAddEvaluatorModal(...e))},a[9]||(a[9]=[(0,s.Lk)("i",{class:"fas fa-plus"},null,-1),(0,s.eW)(" Add Evaluator ")]))]),(0,s.Lk)("div",v,[(0,s.Lk)("div",m,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(le.evaluators,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"evaluator-item"},[(0,s.Lk)("div",{class:"evaluator-avatar",style:(0,n.Tr)({background:ce.getAvatarGradient()})},(0,n.v_)(ce.getInitials(e.name)),5),(0,s.Lk)("div",g,[(0,s.Lk)("div",h,(0,n.v_)(e.name),1),(0,s.Lk)("div",f,(0,n.v_)(e.role),1),(0,s.Lk)("div",p,(0,n.v_)(e.tasksEvaluated||0)+" tasks evaluated",1)]),(0,s.Lk)("div",b,[(0,s.Lk)("button",{class:"btn-icon",onClick:a=>ce.viewEvaluatorTasks(e.id)},a[11]||(a[11]=[(0,s.Lk)("i",{class:"fas fa-eye"},null,-1)]),8,k),ce.isTeamMember(e.id)?((0,s.uX)(),(0,s.CE)("div",w,a[13]||(a[13]=[(0,s.Lk)("i",{class:"fas fa-user-shield",title:"Team Member"},null,-1)]))):((0,s.uX)(),(0,s.CE)("button",{key:0,class:"btn-icon btn-danger",onClick:a=>ce.removeEvaluator(e),title:ce.getEvaluatorActionTitle(e)},a[12]||(a[12]=[(0,s.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,y))])])))),128))])])]),le.showModal?((0,s.uX)(),(0,s.CE)("div",E,[(0,s.Lk)("div",C,[(0,s.Lk)("span",{class:"close",onClick:a[1]||(a[1]=(...e)=>ce.closeModal&&ce.closeModal(...e))},"×"),a[17]||(a[17]=(0,s.Lk)("h2",null,"Add New Evaluator",-1)),(0,s.Lk)("form",{onSubmit:a[4]||(a[4]=(0,i.D$)(((...e)=>ce.addEvaluator&&ce.addEvaluator(...e)),["prevent"]))},[(0,s.Lk)("div",S,[a[14]||(a[14]=(0,s.Lk)("label",null,"Name",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>le.newEvaluator.name=e),type:"text",class:"form-input",required:""},null,512),[[i.Jo,le.newEvaluator.name]])]),(0,s.Lk)("div",L,[a[15]||(a[15]=(0,s.Lk)("label",null,"Role",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>le.newEvaluator.role=e),type:"text",class:"form-input",required:""},null,512),[[i.Jo,le.newEvaluator.role]])]),a[16]||(a[16]=(0,s.Lk)("div",{class:"form-actions"},[(0,s.Lk)("button",{type:"submit",class:"btn-primary"},"Add Evaluator")],-1))],32)])])):(0,s.Q3)("",!0),(0,s.Lk)("div",T,[a[22]||(a[22]=(0,s.Lk)("div",{class:"card-header"},[(0,s.Lk)("h3",null,"Completed Tasks Pending Evaluation")],-1)),(0,s.Lk)("div",x,[ce.pendingTasks.length>0?((0,s.uX)(),(0,s.CE)("div",A,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(ce.pendingTasks,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t.id,class:"task-item"},[(0,s.Lk)("div",M,[(0,s.Lk)("div",B,(0,n.v_)(t.title),1),(0,s.Lk)("span",{class:(0,n.C4)(["status-badge",ce.getPriorityClass(t.priority)])},[(0,s.eW)((0,n.v_)(t.priority)+" ",1),(0,s.Lk)("i",{class:(0,n.C4)(ce.getPriorityIcon(t.priority))},null,2)],2)]),(0,s.Lk)("div",I,[(0,s.Lk)("p",O,(0,n.v_)(t.description),1)]),(0,s.Lk)("div",R,[(0,s.Lk)("div",D,[(0,s.Lk)("div",$,[a[18]||(a[18]=(0,s.Lk)("span",{class:"meta-label"},"Assigned to:",-1)),(0,s.Lk)("span",Q,(0,n.v_)(ce.getMemberName(t.assignedTo)),1)]),(0,s.Lk)("div",j,[a[19]||(a[19]=(0,s.Lk)("span",{class:"meta-label"},"Due:",-1)),(0,s.Lk)("span",_,(0,n.v_)(ce.formatDate(t.dueDate)),1)]),(0,s.Lk)("div",N,[a[20]||(a[20]=(0,s.Lk)("span",{class:"status-label"},"Evaluations:",-1)),(0,s.Lk)("span",F,(0,n.v_)(t.evaluations?.length||0)+" / "+(0,n.v_)(le.evaluators.length),1)])]),(0,s.Lk)("button",{class:"btn-primary",onClick:e=>ce.showEvaluatorSelection(t),disabled:t.evaluations?.some((a=>a.evaluatorId===e.currentEvaluator?.id))},(0,n.v_)(t.evaluations?.some((a=>a.evaluatorId===e.currentEvaluator?.id))?"Already Evaluated":"Evaluate"),9,X)])])))),128))])):((0,s.uX)(),(0,s.CE)("div",P,a[21]||(a[21]=[(0,s.Lk)("i",{class:"fas fa-clipboard-check"},null,-1),(0,s.Lk)("p",null,"No completed tasks pending evaluation",-1),(0,s.Lk)("p",{class:"hint"},"Tasks will appear here after team members complete them",-1)])))])]),le.showEvaluatorModal?((0,s.uX)(),(0,s.CE)("div",q,[(0,s.Lk)("div",J,[(0,s.Lk)("span",{class:"close",onClick:a[5]||(a[5]=(...e)=>ce.closeEvaluatorModal&&ce.closeEvaluatorModal(...e))},"×"),a[23]||(a[23]=(0,s.Lk)("h2",null,"Who's evaluating?",-1)),(0,s.Lk)("div",U,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(le.evaluators,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:(0,n.C4)(["evaluator-profile",{active:le.selectedEvaluator?.id===e.id,disabled:ce.isTaskAssignedToEvaluator(le.selectedTask,e)}]),onClick:a=>ce.selectEvaluator(le.selectedTask,e),title:ce.getEvaluatorDisabledMessage(le.selectedTask,e)},[(0,s.Lk)("div",{class:"evaluator-avatar large",style:(0,n.Tr)({background:ce.getAvatarGradient()})},(0,n.v_)(ce.getInitials(e.name)),5),(0,s.Lk)("div",V,(0,n.v_)(e.name),1),(0,s.Lk)("div",W,(0,n.v_)(e.tasksEvaluated||0)+" evaluations ",1)],10,G)))),128))])])])):(0,s.Q3)("",!0),le.showEvaluationModal?((0,s.uX)(),(0,s.CE)("div",z,[(0,s.Lk)("div",K,[(0,s.Lk)("div",Y,[(0,s.Lk)("h2",null,(0,n.v_)(`Evaluation by ${le.selectedEvaluator?.name}`),1),(0,s.Lk)("button",{class:"close-btn",onClick:a[6]||(a[6]=(...e)=>ce.closeEvaluationModal&&ce.closeEvaluationModal(...e))},"×")]),(0,s.Lk)("div",H,[(0,s.Lk)("div",Z,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(le.rubricData,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"rubric-section"},[(0,s.Lk)("h3",null,(0,n.v_)(ce.getCategoryTitle(t)),1),(0,s.Lk)("table",ee,[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[a[24]||(a[24]=(0,s.Lk)("th",null,"Criterion",-1)),((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(5,(e=>(0,s.Lk)("th",{key:e},(0,n.v_)(e)+" - "+(0,n.v_)(ce.getScoreLabel(e)),1))),64))])]),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",ae,(0,n.v_)(e.name),1),((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(5,(i=>(0,s.Lk)("td",{key:i,class:(0,n.C4)(["score-cell",{selected:ce.isScoreSelected(t,e.id,i)}]),onClick:a=>ce.selectScore(t,e.id,i)},[(0,s.Lk)("div",se,[(0,s.Lk)("div",ne,(0,n.v_)(e.descriptions[i-1]),1),a[25]||(a[25]=(0,s.Lk)("div",{class:"score-select"},null,-1))])],10,te))),64))])))),128))])])])))),128)),(0,s.Lk)("div",ie,[a[26]||(a[26]=(0,s.Lk)("label",{for:"evaluation-comments"},"Additional Comments",-1)),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":a[7]||(a[7]=e=>le.evaluationComments=e),id:"evaluation-comments",class:"evaluation-textarea",placeholder:"Add your comments here..."},null,512),[[i.Jo,le.evaluationComments]])])])]),(0,s.Lk)("div",re,[(0,s.Lk)("button",{class:"btn-primary w-50",onClick:a[8]||(a[8]=(...e)=>ce.submitEvaluation&&ce.submitEvaluation(...e))},"Submit Evaluation")])])])):(0,s.Q3)("",!0)])])])])}t(4114),t(1148),t(2489),t(116),t(7588),t(1701),t(8237);var le=t(8967),ce={name:"EvaluateTask",components:{ResponsiveSidebar:le.A},data(){return{evaluators:JSON.parse(localStorage.getItem("evaluators"))||[],showModal:!1,newEvaluator:{name:"",role:""},showEvaluatorModal:!1,selectedTask:null,selectedEvaluator:null,rubric:{consistencyBranding:{weight:.35,criteria:{mobileResponsiveness:0,contrastVisibility:0,brandGuidelinesAdherence:0}},creativeQuality:{weight:.45,criteria:{visualAppeal:0,clarityComm:0,innovationExecution:0}},timeliness:{weight:.2,criteria:{deliveryTimeliness:0,schedulingPlanning:0,taskOrderAdherence:0}}},rubricData:{consistencyBranding:[{id:"mobileResponsiveness",name:"Mobile Responsiveness",descriptions:["Unresponsive design; mobile users struggle to navigate.","Major usability issues; several elements break on mobile.","Acceptable responsiveness; minor issues noted.","Mostly responsive with only slight glitches.","Fully responsive with a seamless mobile experience."]},{id:"contrastVisibility",name:"Contrast & Visibility",descriptions:["Poor contrast making content unreadable.","Several areas with low contrast; hard to read.","Generally acceptable; minor adjustments needed.","Clear, good contrast with minor imperfections.","Outstanding clarity and accessibility."]},{id:"brandGuidelinesAdherence",name:"Brand Guidelines Adherence",descriptions:["Colors, fonts, and layouts are inconsistent with the brand.","Frequent deviations from the brand guidelines.","Generally follows guidelines with some minor deviations.","Largely consistent with established brand standards.","Perfect alignment with all brand guidelines (incl. 60-30-10 rule)."]}],creativeQuality:[{id:"visualAppeal",name:"Visual Appeal & Engagement",descriptions:["Unattractive, unengaging design.","Lacks visual appeal; does little to engage the audience.","Adequate design; meets basic expectations.","Attractive and engaging with few minor issues.","Exceptionally appealing, innovative, and highly engaging."]},{id:"clarityComm",name:"Clarity & Communication",descriptions:["Message is very unclear or confusing.","Several aspects are ambiguous; needs improvement.","Conveys message adequately; some minor ambiguities.","Clear and effective communication with only slight issues.","Extremely clear, concise, and compelling messaging."]},{id:"innovationExecution",name:"Innovation & Execution",descriptions:["Poor execution; no innovation observed.","Minimal innovation with weak execution overall.","Standard execution; meets requirements.","Good execution with creative elements.","Outstanding execution; highly innovative and polished."]}],timeliness:[{id:"deliveryTimeliness",name:"Delivery Timeliness",descriptions:["Extremely late; significant delay in delivery.","Late delivery with notable impact on workflow.","Delivered on time but with minor delays affecting quality.","On time with only trivial issues in timing.","Delivered promptly or even ahead of schedule as planned."]},{id:"schedulingPlanning",name:"Scheduling & Planning",descriptions:["No planning evident; tasks appear randomly executed.","Poor planning; misaligned with daily priorities.","Average planning; some scheduling issues evident.","Well-planned; mostly aligns with daily priorities.","Exceptionally well-planned and integrated into the daily schedule."]},{id:"taskOrderAdherence",name:"Task Order Adherence",descriptions:["Completely disregarded planned task order.","Significant deviation from planned order, causing disruptions.","Minor deviations from the planned order, but overall acceptable.","Mostly adhered to planned order with slight exceptions.","Fully followed the planned order; tasks executed in the intended sequence."]}]},showEvaluationModal:!1,evaluationComments:""}},computed:{eligibleMembers(){const e=JSON.parse(localStorage.getItem("teamMembers"))||[];return e.filter((e=>!this.evaluators.some((a=>a.id===e.id))))},pendingTasks(){const e=JSON.parse(localStorage.getItem("allTasks"))||[],a=JSON.parse(localStorage.getItem("teamMembers"))||[],t=a.map((e=>e.id));return e.filter((e=>"completed"===e.status&&t.includes(e.assignedTo)&&!e.deleted&&(!e.evaluations||e.evaluations.length<this.evaluators.length))).sort(((e,a)=>new Date(a.createdAt)-new Date(e.createdAt)))},availableEvaluators(){const e=JSON.parse(localStorage.getItem("teamMembers"))||[];return e.filter((e=>e.id!==this.selectedTask?.createdBy))},remainingEvaluators(){if(!this.selectedTask)return[];const e=this.selectedTask.evaluations?.map((e=>e.evaluatorId))||[];return this.availableEvaluators.filter((a=>!e.includes(a.id)))},canSubmitEvaluation(){return this.selectedTask&&this.selectedEvaluator&&this.selectedEvaluator.id!==this.selectedTask.createdBy}},created(){const e=JSON.parse(localStorage.getItem("teamMembers"))||[];this.evaluators.length?this.syncEvaluatorsWithTeamMembers():(this.evaluators=e.map((e=>({...e,tasksEvaluated:0}))),this.saveEvaluators()),window.addEventListener("storage",(e=>{"teamMembers"===e.key&&this.syncEvaluatorsWithTeamMembers()}))},methods:{viewEvaluatorTasks(e){console.log("Viewing tasks for evaluator ID:",e)},getPriorityClass(e){const a={major:"priority-major",mid:"priority-mid",minor:"priority-minor"};return a[e.toLowerCase()]||"priority-mid"},getPriorityIcon(e){const a={major:"fas fa-exclamation-circle",mid:"fas fa-arrow-circle-right",minor:"fas fa-info-circle"};return a[e.toLowerCase()]||"fas fa-circle"},showEvaluatorSelection(e){this.selectedTask=e,this.selectedEvaluator=null,this.showEvaluatorModal=!0},closeEvaluatorModal(){this.showEvaluatorModal=!1,this.selectedTask=null,this.selectedEvaluator=null},hasEvaluatorReviewed(e,a){return!!e.evaluations&&e.evaluations.some((e=>e.evaluatorId===a))},isTaskAssignedToEvaluator(e,a){return e.assignedTo===a.id||this.hasEvaluatorReviewed(e,a.id)},selectEvaluator(e,a){if(this.isTaskAssignedToEvaluator(e,a)){let t=e.assignedTo===a.id?"You cannot evaluate your own tasks.":"You have already evaluated this task.";window.Swal.fire({title:"Not Allowed",text:t,icon:"error",background:"#1a1a1a",color:"#ffffff",confirmButtonColor:"#ff0000"})}else this.selectedEvaluator=a,this.showEvaluatorModal=!1,this.evaluateTask(e.id,a)},getEvaluatorDisabledMessage(e,a){return e.assignedTo===a.id?"Cannot evaluate own task":this.hasEvaluatorReviewed(e,a.id)?"Already evaluated":""},evaluateTask(e,a){const t=this.pendingTasks.find((a=>a.id===e));t&&(this.selectedTask=t,this.selectedEvaluator=a,this.showEvaluationModal=!0)},closeEvaluationModal(){this.showEvaluationModal=!1,this.selectedTask=null,this.selectedEvaluator=null,this.evaluationComments="",this.resetRubricScores()},getCategoryTitle(e){const a={consistencyBranding:"1. Consistency & Branding (35%)",creativeQuality:"2. Creative Quality & Appeal (45%)",timeliness:"3. Timeliness & Execution (20%)"};return a[e]},getScoreLabel(e){const a={1:"Poor",2:"Below Average",3:"Average",4:"Above Average",5:"Excellent"};return a[e]},isScoreSelected(e,a,t){return this.rubric[e].criteria[a]===t},selectScore(e,a,t){this.rubric[e].criteria[a]=t},resetRubricScores(){Object.keys(this.rubric).forEach((e=>{Object.keys(this.rubric[e].criteria).forEach((a=>{this.rubric[e].criteria[a]=0}))}))},generateRubricHtml(e){return`\n        <div class="rubric-container">\n          <div class="rubric-section">\n            <h3>1. Consistency & Branding (35%)</h3>\n            ${this.generateCriteriaTable("consistencyBranding")}\n          </div>\n          \n          <div class="rubric-section">\n            <h3>2. Creative Quality & Appeal (45%)</h3>\n            ${this.generateCriteriaTable("creativeQuality")}\n          </div>\n          \n          <div class="rubric-section">\n            <h3>3. Timeliness & Execution (20%)</h3>\n            ${this.generateCriteriaTable("timeliness")}\n          </div>\n          \n          <div class="comments-section">\n            <label for="evaluation-comments">Additional Comments</label>\n            <textarea id="evaluation-comments" class="swal2-textarea"></textarea>\n          </div>\n        </div>\n      `},generateCriteriaTable(e){const a=this.getRubricData(e);return`\n        <table class="rubric-table">\n          <thead>\n            <tr>\n              <th>Criterion</th>\n              <th>1 - Poor</th>\n              <th>2 - Below Average</th>\n              <th>3 - Average</th>\n              <th>4 - Above Average</th>\n              <th>5 - Excellent</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${a.map((a=>`\n              <tr>\n                <td>${a.name}</td>\n                ${[1,2,3,4,5].map((t=>`\n                  <td class="score-cell" data-category="${e}" data-criterion="${a.id}" data-score="${t}">\n                    <div class="score-content">\n                      <div class="score-description">${a.descriptions[t-1]}</div>\n                      <div class="score-select"></div>\n                    </div>\n                  </td>\n                `)).join("")}\n              </tr>\n            `)).join("")}\n          </tbody>\n        </table>\n      `},initializeRubricHandlers(){document.querySelectorAll(".score-cell").forEach((e=>{e.addEventListener("click",(()=>{const{category:a,criterion:t,score:s}=e.dataset;e.closest("tr").querySelectorAll(".score-cell").forEach((e=>{e.classList.remove("selected")})),e.classList.add("selected"),this.rubric[a].criteria[t]=parseInt(s)}))}))},collectRubricScores(){return{consistencyBranding:{...this.rubric.consistencyBranding.criteria},creativeQuality:{...this.rubric.creativeQuality.criteria},timeliness:{...this.rubric.timeliness.criteria}}},calculateScores(e){const a={consistencyBranding:this.calculateCategoryScore(e.consistencyBranding),creativeQuality:this.calculateCategoryScore(e.creativeQuality),timeliness:this.calculateCategoryScore(e.timeliness)},t=Object.values(a).every((e=>e>=60)),s=.35*a.consistencyBranding+.45*a.creativeQuality+.2*a.timeliness;return{passesMinimums:t,categoryScores:a,finalScore:s}},calculateCategoryScore(e){const a=Object.values(e),t=a.reduce(((e,a)=>e+a),0)/a.length,s=t/5*100;return{average:t,percentage:s,passes:s>=60}},calculateFinalScores(){const e={consistencyBranding:this.calculateCategoryScore(this.rubric.consistencyBranding.criteria),creativeQuality:this.calculateCategoryScore(this.rubric.creativeQuality.criteria),timeliness:this.calculateCategoryScore(this.rubric.timeliness.criteria)},a={consistencyBranding:.35*e.consistencyBranding.percentage,creativeQuality:.45*e.creativeQuality.percentage,timeliness:.2*e.timeliness.percentage},t=Object.values(a).reduce(((e,a)=>e+a),0),s=Object.values(e).every((e=>e.passes)),n=s&&t>=70;return{finalScore:t,passes:n,details:{consistencyBranding:{...e.consistencyBranding,weight:"35%",weightedScore:a.consistencyBranding,passes:e.consistencyBranding.passes},creativeQuality:{...e.creativeQuality,weight:"45%",weightedScore:a.creativeQuality,passes:e.creativeQuality.passes},timeliness:{...e.timeliness,weight:"20%",weightedScore:a.timeliness,passes:e.timeliness.passes}}}},async submitEvaluation(){if(console.log("submitEvaluation called"),!this.canSubmitEvaluation)return void window.Swal.fire({title:"Cannot Evaluate",text:"Task creators cannot evaluate their own tasks",icon:"warning",background:"#1a1a1a",color:"#ffffff",confirmButtonColor:"#ff0000"});const e=await Swal.fire({title:"Submit Evaluation?",text:"Are you sure you want to submit this evaluation? This action cannot be undone.",icon:"question",showCancelButton:!0,confirmButtonColor:"#ff0000",cancelButtonColor:"#1a1a1a",confirmButtonText:"Yes, submit it!",background:"#1a1a1a",color:"#ffffff"});if(!e.isConfirmed)return;const a=this.calculateFinalScores();Swal.fire({title:"Submitting Evaluation...",text:"Please wait while we process your submission.",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,background:"#1a1a1a",color:"#ffffff",willOpen:()=>{Swal.showLoading()}});try{const e={evaluatorId:this.selectedEvaluator.id,evaluatorName:this.selectedEvaluator.name,date:(new Date).toISOString(),scores:this.collectRubricScores(),results:a,comments:this.evaluationComments},t=JSON.parse(localStorage.getItem("allTasks"))||[],s=t.findIndex((e=>e.id===this.selectedTask.id));if(-1===s)throw new Error("Task not found");const n=t[s],i=n.evaluations||[];i.push(e),n.evaluations=i;const r=i.length===this.availableEvaluators.length;if(r){const e=this.calculateOverallResults(i);n.evaluation={...e,completed:!0,lastUpdated:(new Date).toISOString()}}t[s]=n,localStorage.setItem("allTasks",JSON.stringify(t));const o=this.evaluators.findIndex((e=>e.id===this.selectedEvaluator.id));-1!==o&&(this.evaluators[o].tasksEvaluated++,this.saveEvaluators()),await Swal.fire({title:"Evaluation Submitted!",text:"Your evaluation has been successfully submitted.",icon:"success",background:"#1a1a1a",color:"#ffffff",confirmButtonColor:"#10b981"}),await this.showEvaluationResults(a,r),this.closeEvaluationModal()}catch(t){console.error("Error submitting evaluation:",t),await Swal.fire({title:"Error!",text:"Failed to submit evaluation. Please try again.",icon:"error",background:"#1a1a1a",color:"#ffffff",confirmButtonColor:"#ff0000"})}},async showEvaluationResults(e,a){console.log("showEvaluationResults called");const t=`\n        <div class="evaluation-results">\n          <div class="eval-header">\n            <h3 class="eval-title">Evaluation Summary</h3>\n            <div class="eval-status ${e.passes?"pass":"fail"}">\n              ${e.passes?"PASSED":"FAILED"}\n            </div>\n          </div>\n\n          <div class="eval-score">\n            <div class="score-ring ${e.passes?"pass":"fail"}">\n              ${e.finalScore.toFixed(1)}%\n            </div>\n            <p class="score-message">${e.passes?"All requirements met":"Does not meet requirements"}</p>\n          </div>\n\n          <div class="eval-categories">\n            ${Object.entries(e.details).map((([e,a])=>`\n              <div class="eval-category ${a.passes?"pass":"fail"}">\n                <div class="category-header">\n                  <h4>${this.getCategoryTitle(e)}</h4>\n                  <span class="category-value ${a.passes?"pass":"fail"}">\n                    ${a.percentage.toFixed(1)}%\n                  </span>\n                </div>\n                <div class="category-details">\n                  <div class="detail-row">\n                    <span>Raw Score:</span>\n                    <span>${a.percentage.toFixed(1)}%</span>\n                  </div>\n                  <div class="detail-row">\n                    <span>Weight:</span>\n                    <span>${a.weight}</span>\n                  </div>\n                  <div class="detail-row">\n                    <span>Weighted Score:</span>\n                    <span>${a.weightedScore.toFixed(1)}%</span>\n                  </div>\n                  <div class="requirement-status ${a.passes?"pass":"fail"}">\n                    ${a.passes?"✓":"✗"} Minimum Requirement (60%)\n                  </div>\n                </div>\n              </div>\n            `)).join("")}\n          </div>\n\n          ${this.evaluationComments?`\n            <div class="eval-comments">\n              <h4>Additional Comments</h4>\n              <p>${this.evaluationComments}</p>\n            </div>\n          `:""}\n\n          <div class="eval-footer">\n            <div class="evaluator-info">\n              <span>Evaluated by:</span>\n              <strong>${this.selectedEvaluator.name}</strong>\n            </div>\n            <div class="eval-date">\n              ${(new Date).toLocaleDateString()} ${(new Date).toLocaleTimeString()}\n            </div>\n          </div>\n        </div>\n      `,s="\n        <style>\n          .evaluation-results {\n            color: #fff;\n          }\n          .eval-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 2rem;\n          }\n          .eval-title {\n            font-size: 1.5rem;\n            margin: 0;\n          }\n          .eval-status {\n            padding: 0.5rem 1rem;\n            border-radius: 0.5rem;\n            font-weight: 600;\n          }\n          .eval-status.pass {\n            background: rgba(16, 185, 129, 0.2);\n            color: #10b981;\n          }\n          .eval-status.fail {\n            background: rgba(239, 68, 68, 0.2);\n            color: #ef4444;\n          }\n          .eval-score {\n            text-align: center;\n            margin-bottom: 2rem;\n          }\n          .score-ring {\n            width: 120px;\n            height: 120px;\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 2rem;\n            font-weight: 700;\n            margin: 0 auto 1rem;\n            border: 4px solid;\n          }\n          .score-ring.pass {\n            border-color: #10b981;\n            color: #10b981;\n            background: rgba(16, 185, 129, 0.1);\n          }\n          .score-ring.fail {\n            border-color: #ef4444;\n            color: #ef4444;\n            background: rgba(239, 68, 68, 0.1);\n          }\n          .score-message {\n            color: #9ca3af;\n            margin: 0;\n          }\n          .eval-categories {\n            display: flex;\n            flex-direction: column;\n            gap: 1rem;\n          }\n          .eval-category {\n            background: rgba(30, 30, 30, 0.4);\n            border-radius: 0.75rem;\n            padding: 1.25rem;\n          }\n          .category-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 1rem;\n          }\n          .category-header h4 {\n            margin: 0;\n            font-size: 1.1rem;\n          }\n          .category-value {\n            font-size: 1.25rem;\n            font-weight: 600;\n          }\n          .category-value.pass { color: #10b981; }\n          .category-value.fail { color: #ef4444; }\n          .category-details {\n            display: flex;\n            flex-direction: column;\n            gap: 0.5rem;\n          }\n          .detail-row {\n            display: flex;\n            justify-content: space-between;\n            color: #9ca3af;\n            font-size: 0.9rem;\n          }\n          .requirement-status {\n            margin-top: 0.5rem;\n            padding: 0.5rem;\n            border-radius: 0.25rem;\n            text-align: center;\n            font-size: 0.875rem;\n          }\n          .requirement-status.pass {\n            background: rgba(16, 185, 129, 0.1);\n            color: #10b981;\n          }\n          .requirement-status.fail {\n            background: rgba(239, 68, 68, 0.1);\n            color: #ef4444;\n          }\n          .eval-comments {\n            margin-top: 1.5rem;\n            padding-top: 1.5rem;\n            border-top: 1px solid rgba(255, 255, 255, 0.1);\n          }\n          .eval-comments h4 {\n            margin: 0 0 0.5rem 0;\n            color: #fff;\n          }\n          .eval-comments p {\n            background: rgba(30, 30, 30, 0.4);\n            padding: 1rem;\n            border-radius: 0.5rem;\n            margin: 0;\n            color: #e5e7eb;\n          }\n          .eval-footer {\n            margin-top: 1.5rem;\n            padding-top: 1.5rem;\n            border-top: 1px solid rgba(255, 255, 255, 0.1);\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            color: #9ca3af;\n            font-size: 0.875rem;\n          }\n          .evaluator-info strong {\n            color: #fff;\n            margin-left: 0.5rem;\n          }\n        </style>\n      ";console.log("Showing SweetAlert with results"),await Swal.fire({title:a?"Final Evaluation Complete":"Evaluation Submitted",html:s+t,icon:e.passes?"success":"error",background:"#1a1a1a",color:"#ffffff",confirmButtonColor:"#ff0000",width:"600px",showCloseButton:!0,allowOutsideClick:!1})},getRubricData(e){return this.rubricData[e]||[]},getMemberName(e){const a=JSON.parse(localStorage.getItem("teamMembers"))||[],t=a.find((a=>a.id===e));if(t)return t.name;const s=this.evaluators.find((a=>a.id===e));return s?s.name:"Unknown"},formatDate(e){const a=new Date(e);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(a)},getTotalEvaluations(){return this.evaluators.reduce(((e,a)=>e+a.tasksEvaluated),0)},getAverageEvaluations(){return this.getTotalEvaluations()/this.evaluators.length},showAddEvaluatorModal(){this.showModal=!0},closeModal(){this.showModal=!1,this.newEvaluator={name:"",role:""}},getInitials(e){return e.split(" ").map((e=>e[0])).join("")},getAvatarGradient(){const e=360*Math.random();return`linear-gradient(135deg, hsl(${e}, 70%, 50%), hsl(${e+60}, 70%, 30%))`},isEvaluator(e){return this.evaluators.some((a=>a.id===e))},addEvaluator(){const e={id:Date.now(),name:this.newEvaluator.name,role:this.newEvaluator.role,tasksEvaluated:0,dateAdded:(new Date).toISOString()};this.evaluators.push(e),this.saveEvaluators(),this.newEvaluator={name:"",role:""},window.Swal.fire({title:"Success!",text:"Evaluator added successfully",icon:"success",background:"#1a1a1a",color:"#ffffff",confirmButtonColor:"#ff0000"}),notificationStore.addNotification({id:Date.now(),type:"info",title:"New Evaluator Added",message:`${this.newEvaluator.name} has been added as an evaluator`}),eventBus.emit("activity-created",{type:"member",title:`New evaluator "${this.newEvaluator.name}" added`}),this.closeModal()},isTeamMember(e){const a=JSON.parse(localStorage.getItem("teamMembers"))||[];return a.some((a=>a.id===e))},getEvaluatorActionTitle(e){return this.isTeamMember(e.id)?"Team members cannot be removed from evaluators":"Remove additional evaluator"},async removeEvaluator(e){if(this.isTeamMember(e.id))return void await Swal.fire({title:"Cannot Remove Team Member",text:"Team members are automatically evaluators and cannot be removed.",icon:"warning",background:"#1a1a1a",color:"#ffffff",confirmButtonColor:"#ff0000"});const a=await Swal.fire({title:"Remove Additional Evaluator?",text:`Are you sure you want to remove ${e.name} from evaluators?`,icon:"warning",background:"#1a1a1a",color:"#ffffff",confirmButtonColor:"#ff0000",showCancelButton:!0,confirmButtonText:"Yes, remove",cancelButtonText:"Cancel"});a.isConfirmed&&(this.evaluators=this.evaluators.filter((a=>a.id!==e.id)),this.saveEvaluators(),await Swal.fire({title:"Evaluator Removed",text:`${e.name} has been removed from evaluators.`,icon:"success",background:"#1a1a1a",color:"#ffffff",confirmButtonColor:"#ff0000"}))},syncEvaluatorsWithTeamMembers(){try{const e=JSON.parse(localStorage.getItem("teamMembers"))||[],a=this.evaluators,t=a.filter((a=>!e.some((e=>e.id===a.id))));this.evaluators=[...e.map((e=>({...e,tasksEvaluated:a.find((a=>a.id===e.id))?.tasksEvaluated||0}))),...t],this.saveEvaluators()}catch(e){console.error("Error syncing evaluators:",e)}},saveEvaluators(){localStorage.setItem("evaluators",JSON.stringify(this.evaluators))},getDetailedEvaluation(){const e={};return Object.keys(this.rubricData).forEach((a=>{e[a]=this.rubricData[a].map((e=>({criterion:e.name,score:this.rubric[a].criteria[e.id],description:e.descriptions[this.rubric[a].criteria[e.id]-1]})))})),e},calculateOverallResults(e){const a={consistencyBranding:{sum:0,count:0},creativeQuality:{sum:0,count:0},timeliness:{sum:0,count:0}};e.forEach((e=>{const t=e.results.details;Object.entries(t).forEach((([e,t])=>{a[e]&&(a[e].sum+=t.weightedScore,a[e].count++)}))}));const t={};Object.entries(a).forEach((([e,a])=>{const s=a.count>0?a.sum/a.count:0;t[e]={percentage:s,passes:s>=60}}));const s={consistencyBranding:.35*t.consistencyBranding.percentage,creativeQuality:.45*t.creativeQuality.percentage,timeliness:.2*t.timeliness.percentage},n=Object.values(s).reduce(((e,a)=>e+a),0),i=Object.values(t).every((e=>e.passes)),r=n>=70&&i;return{categoryResults:t,weightedScores:s,finalScore:n,passes:r,details:{consistencyBranding:{...t.consistencyBranding,weight:"35%",weightedScore:s.consistencyBranding},creativeQuality:{...t.creativeQuality,weight:"45%",weightedScore:s.creativeQuality},timeliness:{...t.timeliness,weight:"20%",weightedScore:s.timeliness}}}}}},de=t(6262);const ue=(0,de.A)(ce,[["render",oe],["__scopeId","data-v-ca25af9c"]]);var ve=ue},8237:function(e,a,t){var s=t(6518),n=t(2652),i=t(9306),r=t(8551),o=t(1767),l=TypeError;s({target:"Iterator",proto:!0,real:!0},{reduce:function(e){r(this),i(e);var a=o(this),t=arguments.length<2,s=t?void 0:arguments[1],c=0;if(n(a,(function(a){t?(t=!1,s=a):s=e(s,a,c),c++}),{IS_RECORD:!0}),t)throw new l("Reduce of empty iterator with no initial value");return s}})}}]);
//# sourceMappingURL=5.dd066f17.js.map